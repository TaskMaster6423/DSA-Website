<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interpolation Search Visualizer</title>
    <link rel="stylesheet" href="../css/interpolation_search.css">
</head>
<body>

    <h1>Interpolation Search</h1>

    <div class="container">
        
        <div class="controls-card">
            <div class="input-group" style="flex-grow: 2;">
                <label>Data Set (Numbers only, comma separated)</label>
                <input type="text" id="arrayInput" value="10, 20, 30, 40, 50, 60, 70, 80, 90, 100" placeholder="e.g. 10, 20, 30...">
            </div>
            <div class="input-group">
                <label>Target to Find</label>
                <input type="number" id="targetInput" value="70" placeholder="Value">
            </div>
            
            <div class="speed-control">
                <label>Speed: <span id="speedVal">1x</span></label>
                <input type="range" id="speedRange" min="500" max="3000" value="1500" style="direction: rtl;">
            </div>

            <div class="button-group">
                <button class="btn-primary" onclick="initSearch()">Start / Resume</button>
                <button class="btn-step" onclick="stepForward()">Step By Step</button>
                <button class="btn-stop" onclick="pauseSearch()">Pause</button>
                <button class="btn-reset" onclick="resetVisualization()">Reset</button>
            </div>
        </div>

        <div class="legend">
            <div class="legend-item"><div class="dot" style="background: var(--probe);"></div> Calculated Probe (Pos)</div>
            <div class="legend-item"><div class="dot" style="background: var(--success);"></div> Found</div>
            <div class="legend-item" style="border: 1px solid var(--primary); padding: 2px 5px; border-radius: 4px;">Search Range [Low...High]</div>
        </div>

        <div class="visualizer-container" id="arrayContainer">
            </div>

        <div class="log-section" id="logBox">
            Status: Ready. Data will be sorted numerically.
        </div>

        <div class="algo-explanation">
            <h3>Interpolation Search Logic</h3>
            <p>An improvement over Binary Search for <strong>uniformly distributed</strong> sorted data. It mimics how humans search a phonebook, estimating the position based on the value.</p>
            <div class="formula-box">
                <strong>Formula:</strong><br>
                pos = low + ((target - arr[low]) * (high - low) / (arr[high] - arr[low]))
            </div>
            <ol>
                <li>Start with <strong>Low</strong> (0) and <strong>High</strong> (n-1).</li>
                <li>Apply the formula to estimate the <strong>Position (pos)</strong>.</li>
                <li>If <code>arr[pos] == target</code>, element found.</li>
                <li>If <code>arr[pos] < target</code>, the target is in the upper part: <code>low = pos + 1</code>.</li>
                <li>If <code>arr[pos] > target</code>, the target is in the lower part: <code>high = pos - 1</code>.</li>
            </ol>
        </div>

        <div class="code-section">
            <div class="tabs">
                <button class="tab-btn active" onclick="openTab('c')">C</button>
                <button class="tab-btn" onclick="openTab('cpp')">C++</button>
                <button class="tab-btn" onclick="openTab('java')">Java</button>
                <button class="tab-btn" onclick="openTab('python')">Python</button>
            </div>

            <div id="c" class="code-content active">
<pre>
#include <stdio.h>

int interpolationSearch(int arr[], int n, int x) {
    int lo = 0, hi = n - 1;

    while (lo <= hi && x >= arr[lo] && x <= arr[hi]) {
        if (lo == hi) {
            if (arr[lo] == x) return lo;
            return -1;
        }

        // The Formula
        int pos = lo + (((double)(hi - lo) / 
            (arr[hi] - arr[lo])) * (x - arr[lo]));

        if (arr[pos] == x)
            return pos;

        if (arr[pos] < x)
            lo = pos + 1;
        else
            hi = pos - 1;
    }
    return -1;
}
</pre>
            </div>

            <div id="cpp" class="code-content">
<pre>
#include <iostream>
using namespace std;

int interpolationSearch(int arr[], int n, int x) {
    int lo = 0, hi = n - 1;

    while (lo <= hi && x >= arr[lo] && x <= arr[hi]) {
        if (lo == hi) {
            if (arr[lo] == x) return lo;
            return -1;
        }

        // The Formula
        int pos = lo + (((double)(hi - lo) / 
            (arr[hi] - arr[lo])) * (x - arr[lo]));

        if (arr[pos] == x)
            return pos;

        if (arr[pos] < x)
            lo = pos + 1;
        else
            hi = pos - 1;
    }
    return -1;
}
</pre>
            </div>

            <div id="java" class="code-content">
<pre>
public class InterpolationSearch {
    public static int search(int[] arr, int x) {
        int lo = 0, hi = arr.length - 1;

        while (lo <= hi && x >= arr[lo] && x <= arr[hi]) {
            if (lo == hi) {
                if (arr[lo] == x) return lo;
                return -1;
            }

            // The Formula
            int pos = lo + (((hi - lo) / 
                (arr[hi] - arr[lo])) * (x - arr[lo]));

            if (arr[pos] == x)
                return pos;

            if (arr[pos] < x)
                lo = pos + 1;
            else
                hi = pos - 1;
        }
        return -1;
    }
}
</pre>
            </div>

            <div id="python" class="code-content">
<pre>
def interpolation_search(arr, x):
    lo = 0
    hi = len(arr) - 1

    while lo <= hi and x >= arr[lo] and x <= arr[hi]:
        if lo == hi:
            if arr[lo] == x: return lo
            return -1

        # The Formula
        pos = lo + int(((float(hi - lo) / 
            (arr[hi] - arr[lo])) * (x - arr[lo])))

        if arr[pos] == x:
            return pos
        
        if arr[pos] < x:
            lo = pos + 1
        else:
            hi = pos - 1
            
    return -1
</pre>
            </div>
        </div>
    </div>

    <script src="../js/interpolation_search.js"></script>
</body>
</html>